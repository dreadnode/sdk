# Generated by Dreadnode SDK
# Cloudflare Worker serving: {% for name in component_names %}{{ name }}{% if not loop.last %}, {% endif %}{% endfor %}

name = "{{ worker_name }}"
main = "worker.js"
compatibility_date = "2024-01-01"

[vars]
# Components served by this worker
COMPONENTS = "{% for name in component_names %}{{ name }}{% if not loop.last %},{% endif %}{% endfor %}"

{% if routes %}
# Custom routes
{% for route in routes %}
[[routes]]
pattern = "{{ route }}"
{% endfor %}
{% endif %}

{% if queues %}
# Queue consumers
{% for queue in queues %}
[[queues.consumers]]
queue = "{{ queue.queue_name }}"
max_batch_size = {{ queue.batch_size }}
max_retries = {{ queue.max_retries }}
{% if queue.dead_letter_queue %}
dead_letter_queue = "{{ queue.dead_letter_queue }}"
{% endif %}
{% endfor %}
{% endif %}

# Required secrets (configure with: wrangler secret put SECRET_NAME)
# Run these commands to configure secrets:
#   wrangler secret put BACKEND_URL
#   wrangler secret put BACKEND_API_KEY
#   wrangler secret put AGENT_API_KEY
{% if required_secrets %}
{% for secret in required_secrets %}
#   wrangler secret put {{ secret }}
{% endfor %}
{% endif %}
