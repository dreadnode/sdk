---
title: 'main'
sidebarTitle: 'main'
groups: ["strikes"]
---

# Module `main`

*(Full name: `dreadnode.main`)*

**Source file:** `main.py`

Dreadnode SDK

This module provides the core functionality for the Dreadnode SDK, enabling
users to track tasks, runs, metrics, and artifacts in a structured and
configurable manner. It integrates with OpenTelemetry for tracing and
Logfire for logging.

Classes:
    Dreadnode: The core SDK class for configuring and interacting with Dreadnode.
    DreadnodeConfigWarning: Warning for configuration-related issues.
    DreadnodeUsageWarning: Warning for usage-related issues.

Constants:
    DEFAULT_INSTANCE: A default instance of the Dreadnode class.

## Classes


### Class `Dreadnode`

**Inherits from:** `object`

The core Dreadnode SDK class.

This class provides methods to configure the SDK, track tasks and runs,
log metrics, parameters, and artifacts, and interact with the Dreadnode API.

**Parameters:**

- **`server`** (`Optional[str]`): The Dreadnode server URL.
- **`token`** (`Optional[str]`): The Dreadnode API token.
- **`local_dir`** (`Union[str, Path, t.Literal[False]]`): The local directory for storing data.
- **`project`** (`Optional[str]`): The default project name for runs.
- **`service_name`** (`Optional[str]`): The service name for OpenTelemetry.
- **`service_version`** (`Optional[str]`): The service version for OpenTelemetry.
- **`console`** (`Union[logfire.ConsoleOptions, t.Literal[False, True]]`): Console logging options.
- **`send_to_logfire`** (`Union[bool, t.Literal["if-token-present"]]`): Whether to send data to Logfire.
- **`otel_scope`** (`str`): The OpenTelemetry scope name.

#### Properties

##### `is_default`

**Type:** `\<class 'bool'>` *(property)*

Checks if this instance is the default Dreadnode instance.

**Returns:** `bool` — True if this is the default instance, False otherwise.

*Has: getter*

---

#### Methods

##### `__eq__`

`__eq__(...)`

Return self==value.

---

##### `__init__`

`__init__(...)`

Initializes a new instance of the Dreadnode class.

**Parameters:**

- **`server`** (`Optional[str]`): The Dreadnode server URL.
- **`token`** (`Optional[str]`): The Dreadnode API token.
- **`local_dir`** (`Union[str, Path, t.Literal[False]]`): The local directory for storing data.
- **`project`** (`Optional[str]`): The default project name for runs.
- **`service_name`** (`Optional[str]`): The service name for OpenTelemetry.
- **`service_version`** (`Optional[str]`): The service version for OpenTelemetry.
- **`console`** (`Union[logfire.ConsoleOptions, t.Literal[False, True]]`): Console logging options.
- **`send_to_logfire`** (`Union[bool, t.Literal["if-token-present"]]`): Whether to send data to Logfire.
- **`otel_scope`** (`str`): The OpenTelemetry scope name.

---

##### `__repr__`

`__repr__(...)`

Return repr(self).

---

##### `api`

`api(...)`

Retrieves an API client based on the current configuration.

**Parameters:**

- **`server`** (`Optional[str]`): The server URL for the API client.
- **`token`** (`Optional[str]`): The API token for authentication.

**Returns:** `ApiClient` — An instance of the API client.

**Raises:**

- `RuntimeError` — If the SDK is not configured or the API is unavailable.

---

##### `configure`

`configure(...)`

Configures the Dreadnode SDK and initializes it.

This method should be called before using the SDK. It sets up the
server, token, local directory, and other configuration options.

**Parameters:**

- **`server`** (`Optional[str]`): The Dreadnode server URL.
- **`token`** (`Optional[str]`): The Dreadnode API token.
- **`local_dir`** (`Union[str, Path, t.Literal[False]]`): The local directory for storing data.
- **`project`** (`Optional[str]`): The default project name for runs.
- **`service_name`** (`Optional[str]`): The service name for OpenTelemetry.
- **`service_version`** (`Optional[str]`): The service version for OpenTelemetry.
- **`console`** (`Union[logfire.ConsoleOptions, t.Literal[False, True]]`): Console logging options.
- **`send_to_logfire`** (`Union[bool, t.Literal["if-token-present"]]`): Whether to send data to Logfire.
- **`otel_scope`** (`str`): The OpenTelemetry scope name.

---

##### `initialize`

`initialize(...)`

Initializes the Dreadnode SDK.

This method is called automatically by `configure()`. It sets up
OpenTelemetry components, Logfire configuration, and API clients.

---

##### `link_objects`

`link_objects(...)`

Associate two runtime objects with each other.

This is useful for linking any two objects which are related to
each other, such as a model and its training data, or an input
prompt and the resulting output.

**Parameters:**

- **`origin`** (`t.Any`): The origin object to link from.
- **`link`** (`t.Any`): The linked object to link to.
- **`**attributes`** (`JsonValue`): Additional attributes to attach to the link.

---

##### `log_artifact`

`log_artifact(...)`

Log a file or directory artifact to the current run.

This method uploads a local file or directory to the artifact storage associated with the run.

**Parameters:**

- **`local_uri`** (`Union[str, Path]`): The local path to the file or directory to upload.

---

##### `log_input`

`log_input(...)`

Log a single input to the current task or run.

Inputs can be any runtime object, which are serialized, stored, and tracked
in the Dreadnode UI.

**Parameters:**

- **`name`** (`str`): The name of the input.
- **`value`** (`JsonValue`): The value of the input.
- **`label`** (`Optional[str]`): An optional label for the input.
- **`to`** (`ToObject`): The target object to log the input to. Defaults to "task-or-run". Default: `"task-or-run"`
- **`**attributes`** (`t.Any`): Additional attributes to attach to the input.

---

##### `log_inputs`

`log_inputs(...)`

Log multiple inputs to the current task or run.

See `log_input()` for more details.

---

##### `log_metric`

`log_metric(...)`

Logs a metric to the current task or run.

**Parameters:**

- **`key`** (`str`): The name of the metric.
- **`value`** (`Union[float, bool, Metric]`): The value of the metric.
- **`step`** (`int`): The step of the metric.
- **`origin`** (`Optional[t.Any]`): The origin of the metric.
- **`timestamp`** (`Optional[datetime]`): The timestamp of the metric.
- **`mode`** (`Optional[MetricAggMode]`): The aggregation mode for the metric.
- **`attributes`** (`Optional[JsonDict]`): Additional attributes for the metric.
- **`to`** (`ToObject`): The target object to log the metric to.

---

##### `log_output`

`log_output(...)`

Log a single output to the current task or run.

Outputs can be any runtime object, which are serialized, stored, and tracked
in the Dreadnode UI.

**Parameters:**

- **`name`** (`str`): The name of the output.
- **`value`** (`t.Any`): The value of the output.
- **`label`** (`Optional[str]`): An optional label for the output.
- **`to`** (`ToObject`): The target object to log the output to. Defaults to "task-or-run". Default: `"task-or-run"`
- **`**attributes`** (`JsonValue`): Additional attributes to attach to the output.

---

##### `log_outputs`

`log_outputs(...)`

Log multiple outputs to the current task or run.

See `log_output()` for more details.

---

##### `log_param`

`log_param(...)`

Log a single parameter to the current task or run.

Parameters are key-value pairs that are associated with the task or run
and can be used to track configuration values, hyperparameters, or other
metadata.

**Parameters:**

- **`key`**: The name of the parameter.
- **`value`**: The value of the parameter.
- **`to`**: The target object to log the parameter to. Can be "task-or-run" or "run".
Defaults to "task-or-run". If "task-or-run", the parameter will be logged
to the current task or run, whichever is the nearest ancestor.

---

##### `log_params`

`log_params(...)`

Log multiple parameters to the current task or run.

Parameters are key-value pairs that are associated with the task or run
and can be used to track configuration values, hyperparameters, or other
metadata.

**Parameters:**

- **`to`**: The target object to log the parameters to. Can be "task-or-run" or "run".
Defaults to "task-or-run". If "task-or-run", the parameters will be logged
to the current task or run, whichever is the nearest ancestor.
- **`**params`**: The parameters to log. Each parameter is a key-value pair.

---

##### `push_update`

`push_update(...)`

Push any pending metric or parameter data to the server.

This is useful for ensuring that the UI is up to date with the
latest data. Otherwise, all data for the run will be pushed
automatically when the run is closed.

---

##### `run`

`run(...)`

Creates a new run.

Runs are the main way to track work in Dreadnode. They are
associated with a specific project and can have parameters,
inputs, and outputs logged to them.

You cannot create runs inside other runs.

**Parameters:**

- **`name`** (`Optional[str]`): The name of the run. If not provided, a random name will be generated.
- **`tags`** (`Optional[t.Sequence[str]]`): A list of tags to attach to the run.
- **`params`** (`Optional[AnyDict]`): A dictionary of parameters to attach to the run.
- **`project`** (`Optional[str]`): The project name to associate the run with. If not provided,
the project passed to `configure()` will be used, or the
run will be associated with a default project.
- **`**attributes`** (`t.Any`): Additional attributes to attach to the run span.

**Returns:** `RunSpan` — A new run object.

---

##### `scorer`

`scorer(...)`

Make a scorer from a callable function.

This is useful when you want to change the name of the scorer
or add additional attributes to it.

**Parameters:**

- **`name`**: The name of the scorer.
- **`tags`**: A list of tags to attach to the scorer.
- **`**attributes`**: A dictionary of attributes to attach to the scorer.

**Returns:** A new Scorer object.

---

##### `shutdown`

`shutdown(...)`

Shuts down OpenTelemetry components and flushes pending spans.

This method ensures that all spans are flushed before exiting.

---

##### `span`

`span(...)`

Creates a new OpenTelemetry span.

**Parameters:**

- **`name`** (`str`): The name of the span.
- **`tags`** (`Optional[t.Sequence[str]]`): A list of tags to attach to the span.
- **`**attributes`** (`t.Any`): Additional attributes for the span.

**Returns:** `Span` — A new span object.

---

##### `task`

`task(...)`

Creates a new task from a function.

**Parameters:**

- **`scorers`** (`Optional[t.Sequence[Scorer[t.Any] | ScorerCallable[t.Any]]]`): A list of scorers for the task.
- **`name`** (`Optional[str]`): The name of the task.
- **`label`** (`Optional[str]`): The label of the task.
- **`log_params`** (`Union[t.Sequence[str], bool]`): Whether to log parameters.
- **`log_inputs`** (`Union[t.Sequence[str], bool]`): Whether to log inputs.
- **`log_output`** (`bool`): Whether to log the output.
- **`tags`** (`Optional[t.Sequence[str]]`): A list of tags for the task.
- **`**attributes`** (`t.Any`): Additional attributes for the task.

**Returns:** `TaskDecorator` — A decorator for creating tasks.

---

##### `task_span`

`task_span(...)`

Create a task span without an explicit associated function.

This is useful for creating tasks on the fly without having to
define a function.

**Parameters:**

- **`name`**: The name of the task.
- **`label`**: The label of the task - useful for filtering in the UI.
- **`params`**: A dictionary of parameters to attach to the task span.
- **`tags`**: A list of tags to attach to the task span.
- **`**attributes`**: A dictionary of attributes to attach to the task span.

**Returns:** A TaskSpan object.

---


### Class `DreadnodeConfigWarning`

**Inherits from:** `UserWarning`

Base class for warnings generated by user code.


### Class `DreadnodeUsageWarning`

**Inherits from:** `UserWarning`

Base class for warnings generated by user code.


