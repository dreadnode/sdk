---
title: dreadnode.serialization
---

{/*
::: dreadnode.serialization
*/}

seems\_useful\_to\_serialize
----------------------------

```python
seems_useful_to_serialize(obj: Any) -> bool
```

Checks if the object is likely useful to serialize by attempting to
serialize it and checking if the resulting schema indicates a known type.

**Parameters:**

* **`obj`**
  (`Any`)
  –The Python object to check.

**Returns:**

* **`bool`** ( `bool`
  ) –True if the object is likely useful to serialize, False otherwise.

<Accordion title="Source code in dreadnode/serialization.py" icon="code">
```python
def seems_useful_to_serialize(obj: t.Any) -> bool:
    """
    Checks if the object is likely useful to serialize by attempting to
    serialize it and checking if the resulting schema indicates a known type.

    Args:
        obj: The Python object to check.

    Returns:
        bool: True if the object is likely useful to serialize, False otherwise.
    """
    if obj is None:
        return False

    with contextlib.suppress(Exception):
        _, schema = _serialize(obj)
        return schema.get("x-python-datatype") != "unknown"

    return False
```


</Accordion>

serialize
---------

```python
serialize(obj: Any, *, schema_extras: JsonDict | None = None) -> Serialized
```

Serializes a Python object into a JSON-compatible structure and
generates a corresponding JSON Schema, ensuring consistency between
the serialization format and the schema.

**Parameters:**

* **`obj`**
  (`Any`)
  –The Python object to process.
* **`schema_extras`**
  (`JsonDict | None`, default:
  `None`
  )
  –Additional JSON Schema properties to include.

**Returns:**

* `Serialized`
  –An object containing the serialized data, schema, and their hashes.

<Accordion title="Source code in dreadnode/serialization.py" icon="code">
```python
def serialize(obj: t.Any, *, schema_extras: JsonDict | None = None) -> Serialized:
    """
    Serializes a Python object into a JSON-compatible structure and
    generates a corresponding JSON Schema, ensuring consistency between
    the serialization format and the schema.

    Args:
        obj: The Python object to process.
        schema_extras: Additional JSON Schema properties to include.

    Returns:
        An object containing the serialized data, schema, and their hashes.
    """
    serialized, schema = _serialize(obj)

    if isinstance(serialized, str | int | bool | float):
        serialized_bytes = str(serialized).encode()
    else:
        serialized_bytes = json.dumps(serialized, separators=(",", ":")).encode()

    if schema_extras:
        schema = {**schema, **schema_extras}

    schema_str = json.dumps(schema, separators=(",", ":"))

    data_hash = EMPTY_HASH
    if serialized is not None:
        data_hash = hashlib.sha1(serialized_bytes).hexdigest()[:16]  # noqa: S324 # nosec (using sha1 for speed)

    schema_hash = EMPTY_HASH
    if schema and schema != EMPTY_SCHEMA:
        schema_hash = hashlib.sha1(schema_str.encode()).hexdigest()[:16]  # noqa: S324 # nosec

    return Serialized(
        data=serialized,
        data_bytes=serialized_bytes if serialized is not None else None,
        data_len=len(serialized_bytes) if serialized is not None else 0,
        data_hash=data_hash,
        schema=schema,
        schema_hash=schema_hash,
    )
```


</Accordion>